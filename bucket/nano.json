{
    "version": "7.2-9-10164",
    "description": "The legendary small and friendly GNU editor, now UTF-8 ready for Windows 32/64",
    "homepage": "https://www.nano-editor.org/",
    "license": "GPL-3.0-only",
    "notes": [
        "Configure nano interface, colors, key assignments and more by typing nano ~/.nanorc",
        "If you are upgrading nano, a copy of the old config file is available at ~/.nanorc.bak",
        "Visit https://github.com/okibcn/nano-for-windows for more information."
    ],
    "url": "https://github.com/okibcn/nano-for-windows/releases/download/v7.2-9-10164/nano-for-windows_v7.2-9-10164.7z",
    "hash": "92ad91f7178edfb343e28984ef591a9b7368dc8ab84a6fa3657e684fec1b2231",
    "bin": "nano.exe",
    "pre_install": [
        "$arch=if ($architecture -match '64') {'x86_64'} else {'i686'}",
        "$scoopdir=$scoopdir -replace '\\\\','/'",
        "if (-not (Test-Path ~/.nanorc)){",
        "    Move-Item \"$dir/.nanorc\" ~/.nanorc",
        "    Add-Content ~/.nanorc \"include `\"$scoopdir/apps/nano/current/syntax/*.nanorc`\"\"}",
        "elseif (-not (Test-Path ~/.nanorc.bak)){",
        "    Copy-Item ~/.nanorc ~/.nanorc.bak}",
        "Move-Item \"$dir/pkg_$arch-w64-mingw32/bin/*\" \"$dir\"",
        "Move-Item \"$dir/pkg_$arch-w64-mingw32/share/nano\" \"$dir/syntax\" -Force",
        "Remove-Item  \"$dir/pkg*\" -Force -Recurse",
        "(Get-Content ~/.nanorc) -replace '(@PKGDATADIR@)', \"$scoopdir/apps/nano/current/syntax\" | Set-Content ~/.nanorc",
        "(Get-Content ~/.nanorc) -replace '(/usr/share/nano)', \"$scoopdir/apps/nano/current/syntax\" | Set-Content ~/.nanorc",
        "(Get-Content ~/.nanorc) -replace '(pkg_.*-w64-mingw32.share.nano)', 'syntax' | Set-Content ~/.nanorc"
    ],
    "checkver": {
        "github": "https://api.github.com/repos/okibcn/nano-for-windows",
        "regex": "v([\\d\\.\\-]+)\\.7z"
    },
    "autoupdate": {
        "url": "https://github.com/okibcn/nano-for-windows/releases/download/v$version/nano-for-windows_v$version.7z"
    }
}
